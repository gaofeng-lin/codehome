<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        // function testAsync() {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(function() {
        //             if(true) {
        //                 console.log("请求中");
        //                 resolve('resolve return');
        //             } else {
        //                 reject('reject return');
        //             }
        //         },2000)
        //     })
        // }

        // var res = await testAsync();
        // var res1 = await "testAsync后执行";
        // console.log(res)
        // console.log(res1);

/**
 * 传入参数 n，表示这个函数执行的时间（毫秒）
 * 执行的结果是 n + 200，这个值将用于下一步骤
 */
 function takeLongTime(n) {
    return new Promise(resolve => {
        setTimeout(() => resolve(n + 200), n);
    });
}
 
function step1(n) {
    console.log(`step1 with ${n}`);
    return takeLongTime(n);
}
 
function step2(n) {
    console.log(`step2 with ${n}`);
    return takeLongTime(n);
}
 
function step3(n) {
    console.log(`step3 with ${n}`);
    return takeLongTime(n);
}

// function doIt() {
//     console.time("doIt");
//     const time1 = 3000;
//     step1(time1)	// 打印出step1 with 300   step1中的takeLongTime执行成功resolve返回的参数
//         .then(time2 => step2(time2))	//调用then() 
//         .then(time3 => step3(time3))
//         .then(result => {
//             console.log(`result is ${result}`);
//             console.timeEnd("doIt");
//         });
// }
 

// async function doIt() {
//     console.log("start");
//     const time1 = 300;
//     console.log(time1);
//     const time2 = await step1(time1);
//     console.log(time2);
//     const time3 = await step2(time2);
//     console.log(time3);
//     const res = await step3(time3);
//     console.log(`result is ${res}`)
//     console.log("end")
// }

// doIt();

async function timeout(){
        return "hello word";
    }

//    timeout();
//     //  Promise   __proto__: Promise  [[PromiseStatus]]: "resolved"   [[PromiseValue]]: "hello word"
//     //async返回的是 promise 对象
    console.log(timeout());
//     // 我在后面，但是我是先执行的
setTimeout('console.log(1)', 1000);
   console.log("我在后面，但是我是先执行的");

// console.log(1);
// setTimeout('console.log(2)', 1000);
// console.log(3)
 
// step1 with 300
// step2 with 500
// step3 with 700
// result is 900
// doIt: 1507.251ms
     // 需求：2s后让数值乘以2
     function doubleAfter(num){
        return new Promise((resolve,reject)=>{
            setTimeout(()=>{
                resolve(2*num)
            },2000);
        });
    }

    //  60
    // 等待2s后，promis开始resolve,返回值
    async function test(){
        let result = await doubleAfter(30);
        console.log(result);
    }
    test();

    // 240
    //等待6s后，promis开始resolve,返回值
    async function test2(){
        let first = await doubleAfter(30);
        let second = await doubleAfter(40);
        let third = await doubleAfter(50);
        console.log(first+second+third);
    }
    test2();


    </script>
</body>
</html>